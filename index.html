<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Panel de Administración | UDESODI</title>
  <!-- Font Awesome para iconos -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Chart.js para gráficas -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <style>
    * {margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif;}
    body {background-color: #f0f2f5; color: #333;}
    .container {max-width: 1200px; margin: 0 auto; padding: 15px;}
    .user-data {width: 100%; border-collapse: collapse; margin-top: 15px;}
    .user-data tr {border-bottom: 1px solid #e6e6e6;}
    .user-data td {padding: 10px 5px;}
    .user-data td:first-child {width: 40%; color: #65676b;}
    
    /* Navbar */
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #fff;
      padding: 12px 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      border-radius: 8px;
      margin-bottom: 20px;
      position: relative;
    }
    .logo {font-weight: bold; font-size: 20px; color: #1877f2;}
    .nav-links {display: flex; gap: 20px; align-items: center;}
    .nav-links a {text-decoration: none; color: #65676b; font-weight: 500; position: relative;}
    .nav-links a:hover {color: #1877f2;}
    .nav-links a.active {color: #1877f2;}
    
    /* Dropdown Menu */
    .dropdown {position: relative; display: inline-block;}
    .dropdown-content {
      display: none;
      position: absolute;
      background-color: #fff;
      min-width: 220px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
      border-radius: 8px;
      z-index: 1;
      top: 100%;
      left: 0;
      margin-top: 8px;
    }
    .dropdown:hover .dropdown-content {display: block;}
    .dropdown-content a {
      color: #65676b;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
      border-bottom: 1px solid #f0f2f5;
      cursor: pointer;
    }
    .dropdown-content a:last-child {border-bottom: none;}
    .dropdown-content a:hover {background-color: #f0f2f5; color: #1877f2;}
    .dropdown-toggle {
      display: flex;
      align-items: center;
      gap: 5px;
      cursor: pointer;
    }
    .dropdown-toggle i {font-size: 12px; margin-top: 2px;}
    
    /* Admin Dashboard */
    .dashboard {
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      padding: 20px;
      position: relative;
    }
    .dashboard-header {
      margin-bottom: 25px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .dashboard-title {font-size: 24px; font-weight: bold; color: #1877f2;}
    
    /* Stats Cards */
    .stats-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    .stat-card {
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      padding: 20px;
      display: flex;
      flex-direction: column;
      border-left: 4px solid #1877f2;
    }
    .stat-title {
      color: #65676b;
      font-size: 16px;
      margin-bottom: 10px;
    }
    .stat-value {
      font-size: 28px;
      font-weight: bold;
      color: #1877f2;
      margin-bottom: 5px;
    }
    .stat-change {
      display: flex;
      align-items: center;
      font-size: 14px;
      color: #65676b;
    }
    .stat-change i {margin-right: 5px;}
    .change-positive {color: #4CAF50;}
    .change-negative {color: #F44336;}
    
    /* Charts Section */
    .charts-container {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-bottom: 30px;
    }
    @media (max-width: 992px) {
      .charts-container {
        grid-template-columns: 1fr;
      }
    }
    .chart-card {
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      padding: 20px;
      position: relative;
    }
    .chart-title {
      font-size: 16px;
      font-weight: bold;
      margin-bottom: 15px;
      color: #1877f2;
    }
    .chart-container {
      position: relative;
      height: 300px;
      width: 100%;
    }
    
    /* Recent Activity */
    .recent-activity {
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      padding: 20px;
      margin-bottom: 20px;
    }
    .section-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 15px;
      color: #1877f2;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .activity-list {list-style-type: none;}
    .activity-item {
      padding: 12px 0;
      border-bottom: 1px solid #e6e6e6;
      display: flex;
      align-items: flex-start;
      gap: 15px;
    }
    .activity-item:last-child {border-bottom: none;}
    .activity-icon {
      width: 36px;
      height: 36px;
      background-color: #e7f3ff;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #1877f2;
      flex-shrink: 0;
    }
    .activity-content {flex-grow: 1;}
    .activity-title {font-weight: 500; margin-bottom: 3px;}
    .activity-meta {
      display: flex;
      justify-content: space-between;
      font-size: 14px;
      color: #65676b;
    }
    .user-badge {
      background-color: #e7f3ff;
      color: #1877f2;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 500;
    }
    
    /* Notifications */
    .notifications {
      position: absolute;
      top: 20px;
      right: 20px;
      background-color: #f0f2f5;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
    }
    .notification-icon {font-size: 20px; position: relative;}
    .notification-badge {
      position: absolute;
      top: -8px;
      right: -8px;
      background-color: #e41e3f;
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 12px;
      font-weight: bold;
    }
    .notification-panel {
      display: none;
      position: absolute;
      top: 60px;
      right: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      width: 300px;
      z-index: 100;
    }
    .notification-panel.show {display: block;}
    .notification-item {
      padding: 12px;
      border-bottom: 1px solid #e6e6e6;
    }
    .notification-sender {
      font-weight: bold;
      margin-bottom: 3px;
    }
    .notification-message {
      font-size: 14px;
      color: #444;
    }
    .notification-time {
      font-size: 12px;
      color: #65676b;
      margin-top: 3px;
    }
    
    /* Quick Actions */
    .quick-actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 30px;
    }
    .action-card {
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      padding: 15px;
      text-align: center;
      transition: transform 0.2s;
      cursor: pointer;
    }
    .action-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 12px rgba(0,0,0,0.15);
    }
    .action-icon {
      font-size: 24px;
      color: #1877f2;
      margin-bottom: 10px;
    }
    .action-title {
      font-weight: 500;
      color: #333;
    }
    .user-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      overflow: hidden;
      margin-right: 15px;
    }
    .user-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .admin-info {
      display: flex;
      align-items: center;
    }
    .admin-name {
      font-weight: bold;
      font-size: 18px;
    }
    .admin-role {
      color: #65676b;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="container">
    <nav class="navbar">
      <div class="logo">UDESODI</div>
      <div class="nav-links">
        <a href="index.html" class="active">Inicio</a>
        
        <div class="dropdown">
          <div class="dropdown-toggle">
            <a href="#">Protocolos <i class="fas fa-chevron-down"></i></a>
          </div>
          <div class="dropdown-content">
            <a href="agregar_protocolos.html">Agregar protocolo</a>
            <a href="listado_protocolos.html">Listado de protocolos</a>
            <a href="estadisticas_protocolos.html">Estadísticas de protocolos</a>
          </div>
        </div>
        
        <div class="dropdown">
          <div class="dropdown-toggle">
            <a href="#">Supervisores <i class="fas fa-chevron-down"></i></a>
          </div>
          <div class="dropdown-content">
            <a href="agregar_supervisor.html">Agregar supervisor</a>
            <a href="listado_supervisores.html">Listado de supervisores</a>
            <a href="estadisticas_supervisores.html">Estadísticas de supervisores</a>
          </div>
        </div>
        
        <div class="dropdown">
          <div class="dropdown-toggle">
            <a href="#">Investigadores <i class="fas fa-chevron-down"></i></a>
          </div>
          <div class="dropdown-content">
            <a href="agregar_investigador.html">Agregar investigador</a>
            <a href="listado_investigadores.html">Listado de investigadores</a>
            <a href="estadisticas_investigadores.html">Estadísticas de investigadores</a>
          </div>
        </div>
      </div>
    </nav>
    
    <div class="dashboard">
      <div class="notifications">
        <div class="notification-icon" id="notification-toggle">
          <i class="fas fa-bell"></i>
          <span class="notification-badge">3</span>
        </div>
      </div>
      
      <div class="notification-panel" id="notification-panel">
        <div class="notification-item">
          <div class="notification-sender">Sistema</div>
          <div class="notification-message">Se ha registrado un nuevo protocolo que requiere revisión</div>
          <div class="notification-time">Hace 10 minutos</div>
        </div>
        <div class="notification-item">
          <div class="notification-sender">María González</div>
          <div class="notification-message">Ha solicitado aprobación para modificar su protocolo #2024-128</div>
          <div class="notification-time">Hace 2 horas</div>
        </div>
        <div class="notification-item">
          <div class="notification-sender">Sistema</div>
          <div class="notification-message">Reporte mensual de actividad disponible</div>
          <div class="notification-time">Hace 1 día</div>
        </div>
      </div>
      
      <div class="dashboard-header">
        <div class="admin-info">
          <div class="user-avatar">
            <img src="https://i.pravatar.cc/402" alt="Admin avatar">
          </div>
          <div>
            <div class="admin-name">Carlos Hernández</div>
            <div class="admin-role">Administrador Principal</div>
          </div>
        </div>
        <div class="dashboard-title">Panel de Administración</div>
      </div>
      
      <div class="quick-actions">
        <a href="agregar_protocolos.html" style="text-decoration: none;">
        <div class="action-card">
          <div class="action-icon">
            <i class="fas fa-file-medical"></i>
          </div>
          <div class="action-title">Nuevo Protocolo</div>
        </div>
      </a>
      <a href="agregar_investigador.html" style="text-decoration: none;">
        <div class="action-card">
          <div class="action-icon">
            <i class="fas fa-user-plus"></i>
          </div>
          <div class="action-title">Nuevo Investigador</div>
        </div>
      </a>
      <a href="listado_protocolos.html" style="text-decoration: none;">
        <div class="action-card">
          <div class="action-icon">
            <i class="fas fa-clipboard-check"></i>
          </div>
          <div class="action-title">Revisar Solicitudes</div>
        </div>
      </a>
      <a href="estadisticas_protocolos.html" style="text-decoration: none;">
        <div class="action-card">
          <div class="action-icon">
            <i class="fas fa-chart-line"></i>
          </div>
          <div class="action-title">Ver Estadísticas</div>
        </div>
      </a>
      </div>
      
      <div class="stats-container">
        <div class="stat-card">
          <div class="stat-title">Protocolos Activos</div>
          <div class="stat-value">127</div>
          <div class="stat-change">
            <i class="fas fa-arrow-up change-positive"></i>
            <span class="change-positive">+12% desde el mes pasado</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-title">Investigadores Registrados</div>
          <div class="stat-value">89</div>
          <div class="stat-change">
            <i class="fas fa-arrow-up change-positive"></i>
            <span class="change-positive">+5% desde el mes pasado</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-title">Protocolos Pendientes</div>
          <div class="stat-value">18</div>
          <div class="stat-change">
            <i class="fas fa-arrow-down change-negative"></i>
            <span class="change-negative">-3% desde el mes pasado</span>
          </div>
        </div>
      </div>
      
      <!-- NUEVA SECCIÓN DE GRÁFICAS -->
      <div class="charts-container">
        <!-- Gráfica 1: Tendencia de Protocolos -->
        <div class="chart-card">
          <div class="chart-title">Tendencia de Protocolos (Últimos 6 meses)</div>
          <div class="chart-container">
            <canvas id="protocolosChart"></canvas>
          </div>
        </div>
        
        <!-- Gráfica 2: Distribución por Especialidad -->
        <div class="chart-card">
          <div class="chart-title">Distribución por Especialidad</div>
          <div class="chart-container">
            <canvas id="especialidadesChart"></canvas>
          </div>
        </div>
        
        <!-- Gráfica 3: Estatus de Protocolos -->
        <div class="chart-card">
          <div class="chart-title">Estatus de Protocolos</div>
          <div class="chart-container">
            <canvas id="estatusChart"></canvas>
          </div>
        </div>
        
        <!-- Gráfica 4: Actividad por Día de la Semana -->
        <div class="chart-card">
          <div class="chart-title">Actividad por Día de la Semana</div>
          <div class="chart-container">
            <canvas id="actividadSemanalChart"></canvas>
          </div>
        </div>
      </div>
      
      <div class="recent-activity">
        <div class="section-title">
          <i class="fas fa-history"></i>
          Actividad Reciente
        </div>
        <ul class="activity-list">
          <li class="activity-item">
            <div class="activity-icon">
              <i class="fas fa-file-alt"></i>
            </div>
            <div class="activity-content">
              <div class="activity-title">Nuevo protocolo registrado</div>
              <div class="activity-meta">
                <span>"Evaluación de factores de riesgo cardiovascular en adultos mayores"</span>
                <span>Hace 35 minutos</span>
              </div>
            </div>
          </li>
          <li class="activity-item">
            <div class="activity-icon">
              <i class="fas fa-user-check"></i>
            </div>
            <div class="activity-content">
              <div class="activity-title">Investigador aprobado</div>
              <div class="activity-meta">
                <span>Dra. Laura Sánchez - <span class="user-badge">Cardiología</span></span>
                <span>Hace 2 horas</span>
              </div>
            </div>
          </li>
          <li class="activity-item">
            <div class="activity-icon">
              <i class="fas fa-clipboard-check"></i>
            </div>
            <div class="activity-content">
              <div class="activity-title">Protocolo actualizado</div>
              <div class="activity-meta">
                <span>Protocolo #2024-118 - Cambio de estatus a "En revisión"</span>
                <span>Hace 4 horas</span>
              </div>
            </div>
          </li>
          <li class="activity-item">
            <div class="activity-icon">
              <i class="fas fa-comment-alt"></i>
            </div>
            <div class="activity-content">
              <div class="activity-title">Nuevo comentario en protocolo</div>
              <div class="activity-meta">
                <span>Dr. Martínez comentó en protocolo #2024-095</span>
                <span>Hace 1 día</span>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
  
  <script>
    // Toggle para mostrar/ocultar notificaciones
    document.getElementById('notification-toggle').addEventListener('click', function() {
      document.getElementById('notification-panel').classList.toggle('show');
    });
    
    // Asegurar que los enlaces de los submenús sean clickeables
    document.addEventListener('DOMContentLoaded', function() {
      // Hacer que los dropdowns se mantengan abiertos al hacer clic en su título
      var dropdowns = document.querySelectorAll('.dropdown-toggle');
      dropdowns.forEach(function(dropdown) {
        dropdown.addEventListener('click', function(e) {
          e.preventDefault();
          var content = this.nextElementSibling;
          if (content.style.display === 'block') {
            content.style.display = 'none';
          } else {
            // Cerrar todos los otros dropdowns
            document.querySelectorAll('.dropdown-content').forEach(function(item) {
              item.style.display = 'none';
            });
            content.style.display = 'block';
          }
        });
      });
      
      // Cerrar dropdowns cuando se hace clic fuera de ellos
      document.addEventListener('click', function(e) {
        if (!e.target.closest('.dropdown')) {
          document.querySelectorAll('.dropdown-content').forEach(function(item) {
            item.style.display = '';
          });
        }
      });
      
      // INICIALIZACIÓN DE GRÁFICAS
      
      // Gráfica 1: Tendencia de Protocolos
      const protocolosCtx = document.getElementById('protocolosChart').getContext('2d');
      const protocolosChart = new Chart(protocolosCtx, {
        type: 'line',
        data: {
          labels: ['Dic', 'Ene', 'Feb', 'Mar', 'Abr', 'May'],
          datasets: [
            {
              label: 'Nuevos Protocolos',
              data: [18, 25, 22, 30, 27, 32],
              borderColor: '#1877f2',
              backgroundColor: 'rgba(24, 119, 242, 0.1)',
              tension: 0.3,
              fill: true
            },
            {
              label: 'Protocolos Aprobados',
              data: [15, 22, 18, 25, 23, 28],
              borderColor: '#42b72a',
              backgroundColor: 'rgba(66, 183, 42, 0.1)',
              tension: 0.3,
              fill: true
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'top',
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                precision: 0
              }
            }
          }
        }
      });
      
      // Gráfica 2: Distribución por Especialidad
      const especialidadesCtx = document.getElementById('especialidadesChart').getContext('2d');
      const especialidadesChart = new Chart(especialidadesCtx, {
        type: 'pie',
        data: {
          labels: ['Cardiología', 'Pediatría', 'Oncología', 'Neurología', 'Ginecología', 'Otras'],
          datasets: [{
            data: [25, 18, 22, 15, 12, 8],
            backgroundColor: [
              '#1877f2', '#42b72a', '#e41e3f', '#f7b928', '#a020f0', '#ff7f00'
            ],
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'right',
            }
          }
        }
      });
      
      // Gráfica 3: Estatus de Protocolos
      const estatusCtx = document.getElementById('estatusChart').getContext('2d');
      const estatusChart = new Chart(estatusCtx, {
        type: 'bar',
        data: {
          labels: ['En Revisión', 'Aprobados', 'Rechazados', 'Pendientes', 'En Corrección'],
          datasets: [{
            label: 'Cantidad de Protocolos',
            data: [18, 72, 15, 22, 10],
            backgroundColor: [
              'rgba(24, 119, 242, 0.8)',
              'rgba(66, 183, 42, 0.8)',
              'rgba(228, 30, 63, 0.8)',
              'rgba(247, 185, 40, 0.8)',
              'rgba(160, 32, 240, 0.8)'
            ],
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                precision: 0
              }
            }
          }
        }
      });
      
      // Gráfica 4: Actividad por Día de la Semana
      const actividadSemanalCtx = document.getElementById('actividadSemanalChart').getContext('2d');
      const actividadSemanalChart = new Chart(actividadSemanalCtx, {
        type: 'radar',
        data: {
          labels: ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado', 'Domingo'],
          datasets: [
            {
              label: 'Nuevos Registros',
              data: [32, 45, 38, 41, 35, 15, 8],
              backgroundColor: 'rgba(24, 119, 242, 0.2)',
              borderColor: '#1877f2',
              pointBackgroundColor: '#1877f2',
              pointBorderColor: '#fff',
              pointHoverBackgroundColor: '#fff',
              pointHoverBorderColor: '#1877f2'
            },
            {
              label: 'Actividad de Usuarios',
              data: [45, 52, 48, 55, 49, 28, 15],
              backgroundColor: 'rgba(66, 183, 42, 0.2)',
              borderColor: '#42b72a',
              pointBackgroundColor: '#42b72a',
              pointBorderColor: '#fff',
              pointHoverBackgroundColor: '#fff',
              pointHoverBorderColor: '#42b72a'
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          elements: {
            line: {
              borderWidth: 2
            }
          }
        }
      });
    });
  </script>
</body>
</html>